let owl,gl_lFT=!1,productDetail={productSlideThumbnail:function(){$.getScript(base_url+"mobile/js/owl.carousel.js").done(function(){owl=$("#banner").owlCarousel({autoPlay:5e3,margin:0,nav:!0,dots:!1,lazyLoad:!0,navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],stopOnHover:!0,scrollPerPage:!0,responsive:{0:{items:4,slideBy:4},768:{items:7,slideBy:7},1024:{items:5,slideBy:5}}})}),$("body").on("click","#banner .item",function(){if(!$(this).hasClass("active_")){let t=$(this).data("img");$("#banner .item").removeClass("active_"),$(this).addClass("active_"),$(".main-image").append('<div style="opacity: 0" class="inner-image"><div class="zone-item"><img src="'+t+'" class="img-fluid"></div></div>'),$(".main-image .inner-image").eq(0).animate({opacity:0},500,function(){$(".main-image .inner-image").eq(0).remove()}),$(".main-image .inner-image").eq(1).animate({opacity:1},1e3),image_active=$(this).data("target")}})},slideProduct:function(){let t=$("#sticky-image").find(".slide-step");if(!t.length)return;let e,o=null,i=t.find(".slide-lager"),a=i.find(".swiper-container"),n=t.find(".slide-thumb"),l=n.find(".swiper-container"),s=n.find(".thumb-item"),r=function(){image_active=e.activeIndex,o.slideTo(e.activeIndex),s.removeClass("is-active"),n.find('.thumb-item[data-target="'+e.activeIndex+'"]').addClass("is-active")};o=new Swiper(l,{navigation:{nextEl:n.find(".swiper-button-next"),prevEl:n.find(".swiper-button-prev")},preloadImages:!1,slidesPerView:4,spaceBetween:6,direction:"vertical",height:290,slideToClickedSlide:!0}),e=new Swiper(a,{preloadImages:!1,slidesPerView:1,spaceBetween:30,onTransitionStart:function(){r()}}),r(),n.on("click",".thumb-item",function(t){t.preventDefault(),e.slideTo($(this).data("target")),r()}),i.on("touchend",function(t){t.preventDefault(),o.slideTo(e.activeIndex),r()})},loadGallery:function(){if(gl_lFT){let t=$(".fotorama").on("fotorama:ready fotorama:show fotorama:showend fotorama:load fotorama:error fotorama:startautoplay fotorama:stopautoplay fotorama:fullscreenenter fotorama:fullscreenexit fotorama:loadvideo fotorama:unloadvideo",function(t,e,o){"fotorama:fullscreenexit"==t.type&&e.destroy()}).fotorama({click:!1,allowfullscreen:!0}).data("fotorama"),e=[];$(".lager-item").each(function(){e.push({img:$(this).data("max"),thumb:$(this).data("thumb")})}),t.load(e),t.show(image_active),t.requestFullScreen()}else $.getScript(base_url+"desktop/js/fotorama.js").done(function(){gl_lFT=!0,productDetail.loadGallery()})},scrollProduct:function(){$('.product-nav a[href^="#"]').on("click",function(t){let e=$(this.getAttribute("href"));e.length&&($(".scroll-nav a").removeClass("active"),$(this).addClass("active"),t.preventDefault(),$("html, body").stop().animate({scrollTop:e.offset().top-120},300),console.log(e.offset().top-120))})},viewHistory:function(){$("#product-history").length>0&&Vnit.builIScroll("#product-history")},logHistoryView:function(t){$.ajax({url:base_url+"customer/history/add",type:"POST",data:{product_id:t,_token:_token},dataType:"json",success:function(t){},error:function(t,e,o){console.log(o+"\r\n"+t.statusText+"\r\n"+t.responseText)}})},productSimilar:function(){$.ajax({url:base_url+"product/similar",type:"post",data:{_token:_token,product_id:product_id,vendor:vendor},dataType:"json",success:function(t){""!=t.html&&($("#zone-bought").html(t.html),$(".product-similar").show(),Vnit.builIScroll("#product-similar"))},error:function(t,e,o){console.log(o+"\r\n"+t.statusText+"\r\n"+t.responseText)}})},loadGallery:function(){if(gl_lFT){let t=$(".fotorama").on("fotorama:ready fotorama:show fotorama:showend fotorama:load fotorama:error fotorama:startautoplay fotorama:stopautoplay fotorama:fullscreenenter fotorama:fullscreenexit fotorama:loadvideo fotorama:unloadvideo",function(t,e,o){"fotorama:fullscreenexit"==t.type&&e.destroy()}).fotorama({click:!1,allowfullscreen:!0}).data("fotorama"),e=[];$("#banner .item").each(function(){e.push({img:$(this).data("max"),thumb:$(this).data("thumb")})}),t.load(e),t.show(image_active),t.requestFullScreen()}else $.getScript(base_url+"desktop/js/fotorama.js").done(function(){gl_lFT=!0,productDetail.loadGallery()})},initAmazon:function(){$(document).on("click",".main-image",function(){productDetail.loadGallery()}),$(document).on("change",".p-attr",function(){Vnit.loading(),window.location.href=base_url+"amazon/"+$(this).val()+"/{{ $slug }}.html"}),$(document).on("click",".gird-color li",function(){$(".gird-color li").removeClass("selected"),$(this).addClass("selected");let t=$(this).data("name");$(".color-active").text(t),window.location.href=$(this).data("link"),Vnit.loading()}),Vnit.isInView(".zone-button")?($("#button-fly").removeClass("in-view"),console.log("in-view")):($("#button-fly").addClass("in-view"),console.log("out-view")),$(window).scroll(function(){Vnit.isInView(".zone-button")?($("#button-fly").removeClass("in-view"),console.log("in-view")):($("#button-fly").addClass("in-view"),console.log("out-view"))}),$(".buy-now, .add-cart").prop("disabled",!0),$(".main-image").css({height:$(".main-image").width()}),Vnit.loadSelect2()},Init:function(){productDetail.productSlideThumbnail(),productDetail.productSimilar(),productDetail.viewHistory(),productDetail.logHistoryView(product_id),Vnit.showMoreContent("#js-description"),Vnit.loadSelect2(),Vnit.isInView(".zone-button")?($("#button-fly").removeClass("in-view"),console.log("in-view")):($("#button-fly").addClass("in-view"),console.log("out-view")),$(window).scroll(function(){Vnit.isInView(".zone-button")?($("#button-fly").removeClass("in-view"),console.log("in-view")):($("#button-fly").addClass("in-view"),console.log("out-view"))}),$(document).on("click",".main-image",function(){productDetail.loadGallery()}),$(".main-image, .inner-image").css({height:$(document).width()}),$(".product-table-title").click(function(){let t=$(this).data("id");$(this).hasClass("active")?($(this).removeClass("active"),$("#"+t).slideUp()):($(this).addClass("active"),$("#"+t).slideDown())}),$("#js-description img").each(function(){$(this).removeClass().addClass("img-fluid lazy")})}};$(document).ready(function(){productDetail.Init()}),$(document).ready(function(){$(document).on("click",".lager-inner",function(){productDetail.loadGallery()})});