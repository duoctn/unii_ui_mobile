$(document).ready(function(){$("body").on("click",".address_update",function(){let e=$(this).data("id");$.ajax({url:base_url+"customer/address/ajax/update/"+e,type:"get",dataType:"json",success:function(t){$(".item-inner").show(),$("#address_"+e+" .item-inner").hide(),$(".zone-update").html("").hide(),$("#address_"+e+" .zone-update").html(t.html).show(),$(".checkout-area .shipping_add_address").html("").hide()},error:function(e,t,s){console.log(s+"\r\n"+e.statusText+"\r\n"+e.responseText)}})}),$("body").on("click",".address_delete",function(){let e=$(this).data("id");return bootbox.confirm({size:"small",message:"Bán có muốn xóa địa chỉ giao hàng này?",buttons:{confirm:{label:"Có",className:"btn-success"},cancel:{label:"Không",className:"btn-danger"}},callback:function(t){t&&$.ajax({url:base_url+"customer/address/ajax/delete/"+e,type:"get",dataType:"json",success:function(t){$(".zone-update").html("").hide(),$("#address_"+e+" .item-inner").show(),window.location.reload()},error:function(e,t,s){console.log(s+"\r\n"+e.statusText+"\r\n"+e.responseText)}})}}),!1}),$(document).on("click",".address_cancel",function(){let e=$(this).data("id");e?($(".zone-update").html("").hide(),$("#address_"+e+" .item-inner").show()):$(".checkout-area .shipping_add_address").html("").hide()}),$(document).on("change",".checkout-area select[name=city_id]",function(){$.ajax({url:base_url+"customer/address/get-ajax?field=country&id="+$(this).val(),type:"get",dataType:"json",success:function(e){$('select[name="district_id"]').html(e.html),$('select[name="ward_id"]').html('<option value="">Chọn Phường xã</option>')},error:function(e,t,s){console.log(s+"\r\n"+e.statusText+"\r\n"+e.responseText)}})}),$(document).on("change",".checkout-area select[name=district_id]",function(){$.ajax({url:base_url+"customer/address/get-ajax?field=district&id="+$(this).val(),type:"get",dataType:"json",success:function(e){$('select[name="ward_id"]').html(e.html)},error:function(e,t,s){console.log(s+"\r\n"+e.statusText+"\r\n"+e.responseText)}})}),$(".checkout-area #add_address").click(function(){$.ajax({url:base_url+"customer/address/ajax/create",type:"get",dataType:"json",success:function(e){$(".checkout-area .shipping_add_address").html(e.html).show(),$(".zone-update").html("").hide(),$(".checkout-area .item-inner").show()},error:function(e,t,s){console.log(s+"\r\n"+e.statusText+"\r\n"+e.responseText)}})}),$(document).on("click",".address_save",function(){$("#frm_address").bootstrapValidator({excluded:":disabled",fields:{name:{validators:{notEmpty:{message:"Vui lòng nhập họ tên"}}},phone:{validators:{notEmpty:{message:"Vui lòng nhập số điện thoại"}}},city_id:{validators:{notEmpty:{message:"Vui lòng chọn Tỉnh/Thành phố"}}},district_id:{validators:{notEmpty:{message:"Vui lòng chọn Quận huyện"}}},ward_id:{validators:{notEmpty:{message:"Vui lòng chọn Phường xã"}}},address:{validators:{notEmpty:{message:"Vui lòng nhập địa chỉ"}}}}}).on("success.form.bv",function(e){e.preventDefault();let t=new FormData($("#frm_address")[0]);return $.ajax({url:$("#frm_address").attr("action"),type:"POST",data:t,async:!1,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(e){0==e.error?window.location.reload():Vnit.showBootbox(e.message)},error:function(e,t,s){console.log(s+"\r\n"+e.statusText+"\r\n"+e.responseText)}}),!1})})});